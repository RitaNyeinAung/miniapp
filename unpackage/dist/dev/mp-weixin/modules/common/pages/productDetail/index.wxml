<view class="container"><login vue-id="4975da08-1" type="popup" data-event-opts="{{[['^logged',[['refreshData']]]]}}" bind:logged="__e" bind:__l="__l"></login><view class="carousel"><swiper indicator-dots="{{true}}" circular="true" duration="400" autoplay="{{true}}" current="{{currentCarouselIndex}}" data-event-opts="{{[['change',[['carouselChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{images}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item class="swiper-item"><view class="image-wrapper"><block wx:if="{{item.pic_url}}"><image class="loaded" src="{{config.image_url+item.pic_url}}" mode="aspectFill"></image></block></view></swiper-item></block></swiper><block wx:if="{{images.length>0}}"><view class="indicator">{{''+(currentCarouselIndex+1)+" / "+images.length+''}}</view></block></view><block wx:if="{{productInfo}}"><view class="introduce-section"><text class="title">{{productInfo.title}}</text><view class="_br"></view><text class="description">{{productInfo.description}}</text><view class="price-box"><view><text class="price">{{productInfo.price_member}}</text><text class="price-tip">元</text><block wx:if="{{productInfo.price_market}}"><text class="coupon-tip">原价</text></block><block wx:if="{{productInfo.price_market}}"><text class="m-price">{{productInfo.price_market}}</text></block></view></view><view class="bot-row"><text>{{"‌已售 : "+productInfo.sales_sum}}</text><text>{{"库存 : "+(productInfo.stock||0)}}</text><text>{{"评论 : "+productInfo.comment_member}}</text></view></view></block><view class="c-list"><view data-event-opts="{{[['tap',[['toggleSpec',['$event']]]]]}}" class="c-row b-b" bindtap="__e"><text class="tit">规格</text><view class="con"><text class="selected-text">{{''+(selectedSkuProduct?selectedSkuProduct.key_text:"请选择")+''}}</text></view><text class="yticon icon-you"></text></view><view class="c-row b-b"><text class="tit">数量</text><view class="con"><view class="selected-text"><uni-number-box bind:input="__e" vue-id="4975da08-2" min="{{1}}" value="{{selectedQuantity}}" data-event-opts="{{[['^input',[['__set_model',['','selectedQuantity','$event',[]]]]]]}}" bind:__l="__l"></uni-number-box></view></view></view><view data-event-opts="{{[['tap',[['toggleCoupon',['$event']]]]]}}" class="c-row b-b" bindtap="__e"><text class="tit">优惠</text><view class="con"><block wx:if="{{couponList.length>0}}"><block wx:for="{{$root.l0}}" wx:for-item="coupon" wx:for-index="__i0__"><text class="selected-text  coupon">{{'满'+coupon.g0+"减"+coupon.g1+'元'}}</text></block></block><block wx:else><text><text class="selected-text">暂无</text></text></block></view><block wx:if="{{couponList.length>0}}"><text class="yticon icon-you"></text></block></view><view data-event-opts="{{[['tap',[['toggleAddress',['$event']]]]]}}" class="c-row b-b" bindtap="__e"><text class="tit">送至</text><view class="bz-list con"><text>{{selectedAddress!=null?selectedAddress.dist_name+' '+selectedAddress.city_name+' '+selectedAddress.prov_name:'选择配送地址'}}</text></view></view><view class="c-row b-b"><text class="tit">服务</text><view class="bz-list con"><block wx:if="{{merchantDelivery}}"><text>由<text data-event-opts="{{[['tap',[['toShop',['$0'],['shopInfo.id']]]]]}}" bindtap="__e">{{shopInfo.shop_name}}</text>{{'负责供货, '+merchantDelivery+''}}</text></block><block wx:else><block wx:if="{{expressDelivery}}"><text>由<text data-event-opts="{{[['tap',[['toShop',['$0'],['shopInfo.id']]]]]}}" style="color:red;" bindtap="__e">{{shopInfo.shop_name}}</text>{{"在 "+expressDelivery.stock_name+" 负责发货, "+expressDelivery.send_time+'小时内发货'}}</text></block><block wx:else><text>暂无</text></block></block></view></view></view><view class="eva-section"><view class="e-header"><text class="tit">评价</text><text>{{"("+commentCount+")"}}</text><text data-event-opts="{{[['tap',[['toCommentPage',['$event']]]]]}}" class="tip" bindtap="__e">查看更多</text><text class="yticon icon-you"></text></view><block wx:if="{{commentList.length>0}}"><view class="eva-box"><block wx:if="{{commentList[0].user_header}}"><image class="portrait" src="{{config.image_url+commentList[0].user_header}}" mode="aspectFill"></image></block><view class="right"><text class="name">{{commentList[0].nick_name}}</text><text class="con">{{commentList[0].content}}</text><view class="bot"><text class="attr">购买类型：未知</text><text class="time">{{commentList[0].create_time}}</text></view></view></view></block><block wx:if="{{commentList.length==0}}"><view class="eva-box"><view class="empty">没有评论哦</view></view></block></view><view class="eva-section"><view class="e-header"><text class="tit">商家咨询<text>{{"("+consultCount+")"}}</text></text><text data-event-opts="{{[['tap',[['toConsultPage',['$event']]]]]}}" class="tip" bindtap="__e">查看更多<text class="yticon icon-you"></text></text></view><block wx:if="{{consultList.length>0}}"><view class="consult-box"><view class="question"><view class="question-icon">问</view>{{''+consultList[0].content+''}}</view><view class="answer"><block wx:if="{{consultList[0].answer}}"><view class="answer-icon">答</view></block>{{''+(consultList[0].answer||"还没有回复哦")+''}}</view></view></block><block wx:if="{{consultList.length==0}}"><view class="eva-box"><view class="empty">还没有咨询哦</view></view></block></view><view class="eva-section"><view class="e-header"><view class="tit"><view class="image"><block wx:if="{{shopInfo.store_logo}}"><image src="{{config.image_url+shopInfo.store_logo}}"></image></block><block wx:else><image src="/static/images/common/logo3.png"></image></block></view><view class="title"><block wx:if="{{shopInfo}}"><view class="name">{{shopInfo.shop_name}}</view></block><block wx:if="{{shopInfo}}"><view class="intro">{{''+shopInfo.description+''}}</view></block></view></view><view class="tip"><view class="level"><block wx:if="{{shopInfo.store_grade_name}}"><text>{{shopInfo.store_grade_name}}</text></block></view></view></view><view class="eva-box store"><view class="score"><view class="box"><text class="count">{{shopInfo.goodsNumber}}</text><text class="title">全部宝贝</text></view><view class="box"><text class="count">{{shopInfo.store_collect}}</text><text class="title">关注人数</text></view><view class="box"><text class="count">{{shopInfo.desccredit}}</text><text class="title">描述相符</text></view><view class="box"><text class="count">{{shopInfo.servicecredit}}</text><text class="title">服务态度</text></view><view class="box"><text class="count">{{shopInfo.deliverycredit}}</text><text class="title">发货速度</text></view></view><view class="btn"><view class="b category">查看分类</view><view class="b more">见店逛逛</view></view></view></view><view class="eva-section product-detail"><text class="title">商品详情</text><view class="content"><u-parse vue-id="4975da08-3" content="{{goodsDetail}}" noData=" " data-event-opts="{{[['^preview',[['preview']]],['^navigate',[['navigate']]]]}}" bind:preview="__e" bind:navigate="__e" bind:__l="__l"></u-parse></view><view class="table"><u-table vue-id="4975da08-4" bind:__l="__l" vue-slots="{{['default']}}"><u-tr vue-id="{{('4975da08-5')+','+('4975da08-4')}}" bind:__l="__l" vue-slots="{{['default']}}"><u-th vue-id="{{('4975da08-6')+','+('4975da08-5')}}" bind:__l="__l" vue-slots="{{['default']}}">属性</u-th><u-th vue-id="{{('4975da08-7')+','+('4975da08-5')}}" bind:__l="__l" vue-slots="{{['default']}}">详情</u-th></u-tr><u-tr vue-id="{{('4975da08-8')+','+('4975da08-4')}}" bind:__l="__l" vue-slots="{{['default']}}"><u-td vue-id="{{('4975da08-9')+','+('4975da08-8')}}" bind:__l="__l" vue-slots="{{['default']}}">商品名称</u-td><u-td vue-id="{{('4975da08-10')+','+('4975da08-8')}}" bind:__l="__l" vue-slots="{{['default']}}">{{productInfo.title}}</u-td></u-tr><block wx:for="{{goodsAttr}}" wx:for-item="attr" wx:for-index="__i1__"><u-tr vue-id="{{('4975da08-11-'+__i1__)+','+('4975da08-4')}}" bind:__l="__l" vue-slots="{{['default']}}"><u-td vue-id="{{('4975da08-12-'+__i1__)+','+('4975da08-11-'+__i1__)}}" bind:__l="__l" vue-slots="{{['default']}}">{{attr.attr_name}}</u-td><u-td vue-id="{{('4975da08-13-'+__i1__)+','+('4975da08-11-'+__i1__)}}" bind:__l="__l" vue-slots="{{['default']}}">{{attr.attr_value}}</u-td></u-tr></block></u-table></view></view><view class="eva-section"><text class="title">推荐套餐</text><block wx:if="{{recommendSet.length>0}}"><view class="content"><view class="btn"><view class="b">查看更多</view></view></view></block><block wx:else><view class="content" style="text-align:center;font-size:5px;color:#C0C4CC;">暂无套餐</view></block></view><view class="page-bottom"><navigator class="p-b-btn" url="/modules/home/pages/index/index" open-type="switchTab"><text class="yticon icon-xiatubiao--copy"></text><text>首页</text></navigator><navigator class="p-b-btn" style="position:relative;" url="/modules/cart/pages/index/index" open-type="switchTab"><text class="yticon icon-gouwuche"></text><text>购物车</text></navigator><view data-event-opts="{{[['tap',[['addToCollection',['$event']]]]]}}" class="{{['p-b-btn',(favorite)?'active':'']}}" bindtap="__e"><text class="yticon icon-shoucang"></text><text>收藏</text></view><view class="action-btn-group"><button class=" action-btn no-border buy-now-btn" type="primary" data-event-opts="{{[['tap',[['toOrder',['$event']]]]]}}" bindtap="__e">立即购买</button><button class=" action-btn no-border add-cart-btn" type="primary" data-event-opts="{{[['tap',[['addToCart',['$event']]]]]}}" bindtap="__e">加入购物车</button></view></view><view data-event-opts="{{[['touchmove',[['stopPrevent',['$event']]]],['tap',[['toggleSpec',['$event']]]]]}}" class="{{['popup','spec',specClass]}}" catchtouchmove="__e" bindtap="__e"><view class="mask"></view><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="layer" catchtap="__e"><text class="popup-title">选择规格</text><view class="middle attr-content"><block wx:if="{{!noProductMatch}}"><view class="a-t"><block wx:if="{{tempSelectedSkuProduct.pic_url}}"><image src="{{config.image_url+tempSelectedSkuProduct.pic_url}}"></image></block><block wx:else><image src="/static/images/common/img_bad.jpeg"></image></block><view class="right"><text class="price">{{tempSelectedSkuProduct.price_member+' 元'}}<block wx:if="{{tempSelectedSkuProduct.price_market}}"><text class="price-market">{{tempSelectedSkuProduct.price_market+" 元"}}</text></block></text><text class="stock">{{"库存："+tempSelectedSkuProduct.stock}}</text><view class="selected">已选：<text class="selected-text">{{''+tempSelectedSkuProduct.key_text+''}}</text></view></view></view></block><block wx:else><view class=" a-t"><image src="/static/images/common/empty-data.png"></image><view class="right"><text class="price">暂无数据<text class="price-market"></text></text><text class="stock">库存：暂无数据</text><view class="selected">已选：<text class="selected-text">暂无数据</text></view></view></view></block><block wx:for="{{specGroup}}" wx:for-item="specGroup" wx:for-index="__i2__" wx:key="id"><view class="attr-list"><text>{{specGroup.name}}</text><view class="item-list"><block wx:for="{{specChild}}" wx:for-item="spec" wx:for-index="specIndex"><block wx:if="{{specGroup.id==spec.spec_id}}"><text data-event-opts="{{[['tap',[['selectSpec',['$0'],[[['specChild','',specIndex]]]]]]]}}" class="{{[(tempSelectedSpecKey[spec.spec_id]==spec.id)?'selected':'']}}" bindtap="__e">{{''+spec.item+''}}</text></block></block></view></view></block></view><view class="bottom"><button class="{{['btn',tempSelectedSkuProduct.stock<=0||noProductMatch?'disabled':'']}}" disabled="{{tempSelectedSkuProduct.stock<=0||noProductMatch}}" data-event-opts="{{[['tap',[['confirmSelectedSpec',['$event']]]]]}}" bindtap="__e">完成</button></view></view></view><view data-event-opts="{{[['touchmove',[['stopPrevent',['$event']]]],['tap',[['toggleCoupon',['$event']]]]]}}" class="{{['popup','spec',couponClass]}}" catchtouchmove="__e" bindtap="__e"><view class="mask"></view><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="layer " catchtap="__e"><text class="popup-title">领取优惠劵</text><view class="middle attr-content"><block wx:for="{{$root.l1}}" wx:for-item="coupon" wx:for-index="index"><view class="coupon-box"><view class="info"><view class="money">{{'￥'+coupon.$orig.money+''}}<text class="title">{{coupon.$orig.name}}</text></view><view class="condition">{{'满'+coupon.$orig.condition+'元可以使用'}}</view><view class="date">{{'有效期 '+coupon.f0+" - "+coupon.f1+''}}</view></view><view class="receive-coupon"><block wx:if="{{coupon.$orig.status==1}}"><text style="opacity:0.3;">以领取</text></block><block wx:else><text data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({coupon:coupon.$orig})}}" bindtap="__e">点击领取</text></block></view></view></block></view></view></view><view data-event-opts="{{[['touchmove',[['stopPrevent',['$event']]]],['tap',[['toggleAddress',['$event']]]]]}}" class="{{['popup','spec',addressClass]}}" catchtouchmove="__e" bindtap="__e"><view class="mask"></view><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="layer" catchtap="__e"><text class="popup-title">选择收货地址</text><view class="middle attr-content"><block wx:for="{{addressList}}" wx:for-item="address" wx:for-index="__i3__"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" data-event-params="{{({address})}}" class=" address-box" bindtap="__e"><uni-swipe-action vue-id="{{'4975da08-14-'+__i3__}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-swipe-action-item vue-id="{{('4975da08-15-'+__i3__)+','+('4975da08-14-'+__i3__)}}" bind:__l="__l" vue-slots="{{['default','right']}}"><view slot="right"><text>删除</text></view><view><view class="{{['address-card',address.selected?'selected':'']}}"><view class="top"><view class="name">{{''+address.realname+''}}</view><view class="phone">{{''+address.mobile+''}}</view></view><view class="last"><block wx:if="{{address.status==1}}"><text class="default">[默认地址]</text></block>{{''+(address.address+' ')+"\n\t\t\t\t\t\t\t\t\t\t\t"+address.dist_name+"\n\t\t\t\t\t\t\t\t\t\t\t"+address.city_name+"\n\t\t\t\t\t\t\t\t\t\t\t"+address.prov_name+''}}</view></view></view></uni-swipe-action-item></uni-swipe-action></view></block><block wx:if="{{addressList.length==0}}"><view class="middle empty-address">您还没有添加地址哦！</view></block></view><view class="bottom" style="padding-top:10rpx;"><button data-event-opts="{{[['tap',[['addNewAddress',['$event']]]]]}}" class="{{['btn']}}" bindtap="__e">新增</button></view></view></view><share class="vue-ref" vue-id="4975da08-16" contentHeight="{{580}}" shareList="{{shareList}}" data-ref="share" bind:__l="__l"></share></view>